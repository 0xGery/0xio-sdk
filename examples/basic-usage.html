<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>0xio SDK - Basic Usage Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .status-card {
            background: #f8f9fa;
            border-left: 4px solid #6c757d;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .status-card.success { border-left-color: #28a745; }
        .status-card.error { border-left-color: #dc3545; }
        .status-card.warning { border-left-color: #ffc107; }
        .button {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
        .button.success { background: #28a745; }
        .button.warning { background: #ffc107; color: #212529; }
        .button.danger { background: #dc3545; }
        .form-group {
            margin: 15px 0;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        .logs {
            background: #1e1e1e;
            color: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .feature-section {
            border-top: 2px solid #e9ecef;
            margin-top: 30px;
            padding-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>0xio SDK - Basic Usage Example</h1>
        <p>This example demonstrates the core functionality of the 0xio Wallet SDK.</p>

        <!-- Connection Status -->
        <div class="status-card" id="status-card">
            <h3>Connection Status</h3>
            <p><strong>SDK Status:</strong> <span id="sdk-status">Initializing...</span></p>
            <p><strong>Connection:</strong> <span id="connection-status">Not connected</span></p>
            <p><strong>Address:</strong> <span id="wallet-address">None</span></p>
            <p><strong>Balance:</strong> <span id="wallet-balance">0</span> OCT</p>
            <p><strong>Network:</strong> <span id="network-info">Unknown</span></p>
        </div>

        <!-- Connection Controls -->
        <div>
            <h3>Connection</h3>
            <button id="connect-btn" class="button" disabled>Connect Wallet</button>
            <button id="disconnect-btn" class="button warning" disabled>Disconnect</button>
            <button id="refresh-balance-btn" class="button" disabled>Refresh Balance</button>
        </div>

        <!-- Transaction Section -->
        <div class="feature-section">
            <h3>Send Transaction</h3>
            <div class="form-group">
                <label for="recipient">Recipient Address:</label>
                <input type="text" id="recipient" placeholder="Enter recipient address">
            </div>
            <div class="form-group">
                <label for="amount">Amount (OCT):</label>
                <input type="number" id="amount" step="0.000001" placeholder="0.000000">
            </div>
            <div class="form-group">
                <label for="message">Message (Optional):</label>
                <input type="text" id="message" placeholder="Optional message">
            </div>
            <div class="form-group">
                <label for="fee-level">Fee Level:</label>
                <select id="fee-level">
                    <option value="1">Standard (1)</option>
                    <option value="3">Priority (3)</option>
                </select>
            </div>
            <button id="send-tx-btn" class="button success" disabled>Send Transaction</button>
        </div>

        <!-- Private Features Section -->
        <div class="feature-section">
            <h3>Private Features</h3>
            <div class="status-card" id="private-status">
                <p><strong>Private Balance Available:</strong> <span id="private-balance-available">Unknown</span></p>
                <p><strong>Can Decrypt:</strong> <span id="can-decrypt">Unknown</span></p>
            </div>
            
            <div class="form-group">
                <label for="encrypt-amount">Amount to Encrypt (OCT):</label>
                <input type="number" id="encrypt-amount" step="0.000001" placeholder="0.000000">
            </div>
            <button id="encrypt-balance-btn" class="button" disabled>Encrypt Balance</button>
            
            <div class="form-group">
                <label for="decrypt-amount">Amount to Decrypt (OCT):</label>
                <input type="number" id="decrypt-amount" step="0.000001" placeholder="0.000000">
            </div>
            <button id="decrypt-balance-btn" class="button" disabled>Decrypt Balance</button>
            
            <button id="check-pending-btn" class="button" disabled>Check Pending Private Transfers</button>
        </div>

        <!-- Advanced Features -->
        <div class="feature-section">
            <h3>Advanced</h3>
            <button id="tx-history-btn" class="button" disabled>Get Transaction History</button>
            <button id="network-info-btn" class="button" disabled>Get Network Info</button>
            <button id="test-api-btn" class="button" disabled>Test All APIs</button>
            <button id="clear-logs-btn" class="button">Clear Logs</button>
        </div>

        <!-- Event Logs -->
        <div class="logs" id="logs">Loading SDK...</div>
    </div>

    <script type="module">
        // Import the SDK (in production, this would be from a CDN or npm package)
        // For now, we'll simulate the SDK
        
        let wallet = null;
        let connected = false;

        // Logging function
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById('logs');
            const prefix = type === 'error' ? '[ERROR]' : type === 'success' ? '[SUCCESS]' : type === 'warning' ? '[WARNING]' : '[INFO]';
            logElement.innerHTML += `[${timestamp}] ${prefix} ${message}\n`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearLogs() {
            document.getElementById('logs').innerHTML = '';
            log('Logs cleared');
        }

        function updateUI() {
            const connectBtn = document.getElementById('connect-btn');
            const disconnectBtn = document.getElementById('disconnect-btn');
            const statusCard = document.getElementById('status-card');
            
            // Update button states
            if (wallet && !connected) {
                connectBtn.disabled = false;
                connectBtn.textContent = 'Connect Wallet';
                disconnectBtn.disabled = true;
            } else if (connected) {
                connectBtn.disabled = true;
                connectBtn.textContent = 'âœ“ Connected';
                disconnectBtn.disabled = false;
            } else {
                connectBtn.disabled = true;
                connectBtn.textContent = 'SDK Not Ready';
                disconnectBtn.disabled = true;
            }
            
            // Update status card
            statusCard.className = 'status-card ' + (connected ? 'success' : (wallet ? 'warning' : 'error'));
            
            // Update transaction and feature buttons
            const featureButtons = [
                'refresh-balance-btn', 'send-tx-btn', 'encrypt-balance-btn', 
                'decrypt-balance-btn', 'check-pending-btn', 'tx-history-btn', 
                'network-info-btn', 'test-api-btn'
            ];
            
            featureButtons.forEach(id => {
                document.getElementById(id).disabled = !connected;
            });
        }

        async function initializeSDK() {
            try {
                log('Initializing 0xio Wallet SDK...');

                // In a real implementation, this would be:
                // import { createOctraWallet } from '@0xgery/0xio-sdk';
                // wallet = await createOctraWallet({ ... });
                
                // For this demo, we'll simulate the SDK
                await simulateSDKInitialization();
                
                log('SDK initialized successfully', 'success');
                document.getElementById('sdk-status').textContent = 'Ready';
                
                updateUI();
            } catch (error) {
                log(`SDK initialization failed: ${error.message}`, 'error');
                document.getElementById('sdk-status').textContent = 'Failed';
                updateUI();
            }
        }

        async function simulateSDKInitialization() {
            // Simulate SDK loading delay
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Create mock wallet object
            wallet = {
                async connect() {
                    log('Connecting to wallet...');
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                    // Simulate connection
                    connected = true;
                    const mockData = {
                        address: 'OCT1234567890ABCDEF1234567890ABCDEF',
                        balance: { public: 150.567, private: 25.123, total: 175.69, currency: 'OCT' },
                        networkInfo: { id: 'testnet', name: 'Octra Testnet', isTestnet: true }
                    };
                    
                    document.getElementById('connection-status').textContent = 'Connected';
                    document.getElementById('wallet-address').textContent = mockData.address;
                    document.getElementById('wallet-balance').textContent = mockData.balance.total;
                    document.getElementById('network-info').textContent = mockData.networkInfo.name;
                    
                    log(`Connected to wallet: ${mockData.address}`, 'success');
                    return mockData;
                },
                
                async disconnect() {
                    log('Disconnecting from wallet...');
                    connected = false;
                    
                    document.getElementById('connection-status').textContent = 'Not connected';
                    document.getElementById('wallet-address').textContent = 'None';
                    document.getElementById('wallet-balance').textContent = '0';
                    document.getElementById('network-info').textContent = 'Unknown';
                    
                    log('Disconnected from wallet', 'success');
                },
                
                async getBalance() {
                    log('Refreshing balance...');
                    const balance = { public: 150.567, private: 25.123, total: 175.69, currency: 'OCT' };
                    document.getElementById('wallet-balance').textContent = balance.total;
                    log(`Balance updated: ${balance.total} OCT`, 'success');
                    return balance;
                },
                
                async sendTransaction(txData) {
                    log(`Sending transaction: ${txData.amount} OCT to ${txData.to}`);
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    const result = {
                        success: true,
                        txHash: '0x' + Math.random().toString(16).substr(2, 64),
                        message: 'Transaction sent successfully'
                    };
                    
                    log(`Transaction sent successfully: ${result.txHash}`, 'success');
                    return result;
                }
            };
        }

        // Event handlers
        document.getElementById('connect-btn').addEventListener('click', async () => {
            try {
                await wallet.connect();
                updateUI();
            } catch (error) {
                log(`Connection failed: ${error.message}`, 'error');
            }
        });

        document.getElementById('disconnect-btn').addEventListener('click', async () => {
            try {
                await wallet.disconnect();
                updateUI();
            } catch (error) {
                log(`Disconnect failed: ${error.message}`, 'error');
            }
        });

        document.getElementById('refresh-balance-btn').addEventListener('click', async () => {
            try {
                await wallet.getBalance();
            } catch (error) {
                log(`Balance refresh failed: ${error.message}`, 'error');
            }
        });

        document.getElementById('send-tx-btn').addEventListener('click', async () => {
            try {
                const recipient = document.getElementById('recipient').value.trim();
                const amount = parseFloat(document.getElementById('amount').value);
                const message = document.getElementById('message').value.trim();
                const feeLevel = parseInt(document.getElementById('fee-level').value);
                
                if (!recipient) {
                    log('Please enter recipient address', 'warning');
                    return;
                }
                
                if (!amount || amount <= 0) {
                    log('Please enter valid amount', 'warning');
                    return;
                }
                
                const txData = {
                    to: recipient,
                    amount: amount,
                    message: message || undefined,
                    feeLevel: feeLevel
                };
                
                const result = await wallet.sendTransaction(txData);
                
                // Clear form
                document.getElementById('recipient').value = '';
                document.getElementById('amount').value = '';
                document.getElementById('message').value = '';
                
            } catch (error) {
                log(`Transaction failed: ${error.message}`, 'error');
            }
        });

        document.getElementById('clear-logs-btn').addEventListener('click', clearLogs);

        // Add more event handlers for other buttons...
        document.getElementById('test-api-btn').addEventListener('click', () => {
            log('Testing all API methods...', 'info');
            log('Connection test: PASS', 'success');
            log('Balance test: PASS', 'success');
            log('Network test: PASS', 'success');
            log('All API tests completed successfully!', 'success');
        });

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', initializeSDK);
    </script>
</body>
</html>